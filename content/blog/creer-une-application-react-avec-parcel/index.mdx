---
title: 'Cr√©er une application React avec Parcel'
date: '2021-03-07'
description: "S'essayer aux bundlers en cr√©ant une application React avec Parcel"
tags:
  - React
  - Frontend
  - Parcel
creditsUserUrl: https://commons.wikimedia.org/wiki/File:React-icon.svg
creditsUser: Facebook
featuredImage: cover.png
growth: 'üå≥'
---

## Pr√©-requis

- Node install√©
- Npm ou Yarn install√©
- notions en React

## Introduction

Commencer un projet React est tr√®s facile gr√¢ce √† des outils comme `create-react-app` . Mais si nous voulons aller plus loin et personnaliser le projet selon notre besoin, il est imp√©ratif d'utiliser un bundler.

## Module bundler

Un module bundler est un outil utilis√© en frontend pour assembler les diff√©rents fichiers de notre projet. Typiquement si notre code source ressemble √† cela

```text
package.json
src
|-- index.js
|-- components
    |-- App.js
    |-- App.css
```

Un bundler nous permet d'assembler ces fichiers en un seul fichier _javascript_ et _css_ qui seront envoy√©s au navigateur

```text
dist
|-- script.js
|-- style.css
|-- index.html
```

Mais il ne fait pas que cela, le bundler nous permet d'effectuer diff√©rentes op√©rations sur les fichiers de notre code source.

> Le bundler nous permet notamment de faire du [code-splitting](https://reactjs.org/docs/code-splitting.html), de la [minification](<https://en.wikipedia.org/wiki/Minification_(programming)>), ou encore d'appliquer des transformations gr√¢ce √† un compilateur comme [Babel](https://babeljs.io/)

## Parcel ou le bundler √† z√©ro configuration

Il existe plusieurs bundlers plus ou moins faciles √† utiliser. Parmi les plus faciles nous avons [Parcel](https://parceljs.org/) qui se veut "z√©ro configuration". C'est-√†-dire qu'on peut le mettre en place tr√®s rapidement.

> Je pense que Parcel est l'outil parfait pour un d√©veloppeur d√©butant avec React habitu√© √† `create-react-app` pour s'essayer aux bundlers.

### Installation

Pour installer Parcel sur un projet il suffit d'ex√©cuter

```bash
yarn add -D parcel@next

# ou
npm install -D parcel@next
```

> Parcel est un outil de d√©veloppement, donc il fait partie des d√©pendances de dev d'o√π l'argument `-D`

> Nous allons utiliser [Parcel 2](https://v2.parceljs.org/) qui est encore en version [beta](https://v2.parceljs.org/blog/beta1/). Par rapport √† la version 1, je trouve que l'API est plus simplifi√©e. Mais ne t'en fais pas, si tu veux utiliser [Parcel 1](https://parceljs.org/getting_started.html) ce n'est qu'une question d'adaptation.

## Cr√©ation d'un projet React

### Initialisation du package.json

Pour cr√©er notre projet React, il faut d'abord cr√©er le fichier `package.json`. Pour cela, nous allons nous mettre dans un dossier `react-parcel` puis ex√©cuter `npm init -y`

```bash
mkdir react-parcel
cd react-parcel
npm init -y
```

> `-y` permet d'initialiser notre projet avec toutes les informations par d√©faut dans le `package.json`

### Installation des d√©pendances

En dehors de Parcel, le minimum n√©cessaire √† installer pour cr√©er notre projet sont `react` et `react-dom`

```bash
yarn add react react-dom
yarn add -D parcel

# ou
npm install react react-dom
npm install -D parcel
```

### Hello World React

Nous allons mettre en place un projet Hello World tr√®s simple. Dans `react-parcel`, nous allons cr√©er un dossier `src` et dedans on y mettra les fichiers `index.js` et `index.html`

```bash
# dans react-parcel
mkdir src
cd src
touch index.js
touch index.html
```

`index.html` est le point d'entr√©e de notre projet React (ce qui rend Parcel diff√©rent des autres bundlers qui sp√©cifient un fichier Javascript en point d'entr√©e). Dedans nous allons √©crire

```html
<!DOCTYPE html>
<html>
  <head>
    <title>React Parcel</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="index.js"></script>
  </body>
</html>
```

> Comme tu peux le constater, nous r√©f√©ren√ßons notre fichier `index.js`dans le fichier `index.html` en sp√©cifiant le `type="module"`

> L'√©l√©ment `div` avec l'identifiant `root` nous permettra d'encrer notre application React √† cet endroit

Dans `index.js`, nous allons √©crire

```jsx
import React from 'react'
import { render } from 'react-dom'
import App from './components/App'

render(<App />, document.getElementById('root'))
```

Et enfin, nous allons cr√©er un dossier `components`dans le dossier `src` o√π on y mettra les fichiers `App.js` et `App.css`

```bash
# dans src
mkdir components
cd components
touch App.js
touch App.css
```

```jsx
// App.js
import React from 'react'
import './App.css'

const App = () => (
  <main>
    <h1>Hello World</h1>
    <p>This is a React application built with Parcel</p>
  </main>
)

export default App
```

```css
/* App.css */
body {
  background-color: lightgray;
  font-family: sans-serif;
}

h1 {
  color: dodgerblue;
}
```

### Scripts Parcel

Pour lancer Parcel et construire notre projet, nous allons modifier le fichier `package.json` pour ajouter les scripts de commande suivants

```json
{
  // ...
  "scripts": {
    "start": "parcel serve src/index.html",
    "build": "parcel build src/index.html"
  }
  // ...
}
```

> `parcel serve` permet de lancer le projet en mode d√©veloppement. Parcel est configur√© par d√©faut avec le `Hot Reload` qui permet d'effectuer des modifications dans le code et d'appliquer ces changements dans l'application sans rafra√Æchir la page du navigateur

> `parcel build` permet de construire et de bundler le projet dans un dossier appel√© `dist` (pour distribution). Ce dossier peut ensuite √™tre d√©ploy√© sur un serveur (`Netlify` ou `Github pages` par exemple)

### Ex√©cution

Lan√ßons maintenant notre projet en ex√©cutant la commande

```bash
yarn start

# ou
npm run start
```

Par d√©faut le serveur de Parcel se lance sur [http://localhost:1234](http://localhost:1234/)

![React parcel](./react-parcel.png)

Et voil√† ‚ú® Nous venons de configurer simplement une application React avec Parcel üòÅ

## Pour aller plus loin

Parcel est tr√®s facile √† mettre en place. Cependant, ce que nous avons vu ne nous permet pas de traiter tous les cas d'utilisation.

Je te conseille vivement de lire la documentation ([v1](https://parceljs.org/getting_started.html) ou [v2](https://v2.parceljs.org/)) pour conna√Ætre tout ce que tu peux r√©aliser avec cet outil.

> Parcel est tr√®s puissant mais personnellement je pr√©f√®re utiliser [Webpack](https://webpack.js.org/) pour avoir plus de flexibilit√© et de contr√¥le. Mais ce sera pour un autre article.

Voici quelques trucs en plus que tu peux essayer de mettre en place pour t'entra√Æner

- utiliser un pr√©processeur CSS (sass)
- configurer le code-splitting
- configurer un proxy vers un serveur d'API
